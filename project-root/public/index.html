<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Game-api_Undertale</title>
    <link rel="icon" href="./img/Red_SOUL_Sprite.svg" type="image/svg+xml">
    <link rel="stylesheet" href="./style.css">
</head>
<body>

    <audio id="bg-music" src="./audio/010. Ghost Fight (UNDERTALE Soundtrack) - Toby Fox.mp3" loop></audio>

    <!-- ===== LOGIN SCREEN ===== -->
    <div id="login-screen" class="active-screen undertale-ui">
        <h1>ROGUE-LITE API</h1>
        
        <div id="auth-section">
            <div id="auth-login">
                <p>Login to play:</p>
                <input type="text" id="auth-username" placeholder="Username">
                <input type="password" id="auth-password" placeholder="Password">
                <br><br>
                <button class="btn-undertale fight" id="btn-login">LOGIN</button>
                <br><br>
                <p class="auth-hint">No account? <a href="#" id="show-register">Register</a></p>
            </div>
            
            <div id="auth-register">
                <p>Create an account:</p>
                <input type="text" id="reg-username" placeholder="Username">
                <input type="email" id="reg-email" placeholder="Email">
                <input type="password" id="reg-password" placeholder="Password (min 6 chars)">
                <br><br>
                <button class="btn-undertale fight" id="btn-register">REGISTER</button>
                <br><br>
                <p class="auth-hint">Already have an account? <a href="#" id="show-login">Login</a></p>
            </div>
        </div>

        <div id="player-section">
            <p>Welcome, <span id="auth-user-display"></span>! <a href="#" id="btn-logout">Logout</a></p>
            <p>Enter your character name:</p>
            <input type="text" id="player-name-input" placeholder="Nom du joueur">
            <br><br>
            <button class="btn-undertale fight" id="btn-start-game">START</button>
        </div>
    </div>

    <!-- ===== GAME SCREEN ===== -->
    <div id="game-screen" class="undertale-ui">
        
        <div id="room-info">
            <h2 id="room-name">Loading...</h2>
            <p id="room-log">...</p>
        </div>

        <div id="combat-ui">
            <!-- Enemy info -->
            <div id="enemy-ui-block" class="enemy-stats">
                <span class="enemy-name" id="enemy-name-display">MONSTER</span>
                <div class="enemy-hp-container"><div id="enemy-hp" class="enemy-hp-fill"></div></div>
            </div>
            
            <!-- Enemy sprite -->
            <div class="enemy-container">
                <img src="img/sans-removebg.png" alt="Enemy" class="enemy-sprite" id="enemy-sprite">
            </div>

            <!-- Timing bar (hidden until FIGHT action chosen) -->
            <div id="timing-bar-container">
                <div id="timing-bar">
                    <div id="timing-sweetspot"></div>
                    <div id="timing-indicator"></div>
                </div>
                <p id="timing-label">Press ENTER or click to strike!</p>
            </div>

            <!-- Battle box: now a canvas for bullet-hell dodge phase -->
            <div id="battle-box-wrapper" class="battle-box">
                <p id="battle-text">* The battle begins.</p>
                <canvas id="battle-canvas" width="568" height="200"></canvas>
            </div>

            <!-- Player stats -->
            <div class="player-stats">
                <span id="player-name-display">PLAYER</span> <span class="lv-display">LV 1</span>
                <div class="hp-section">
                    <span class="hp-label">HP</span>
                    <div class="hp-bar-container"><div id="player-hp" class="hp-bar-fill"></div></div>
                    <span class="hp-values" id="hp-text">100 / 100</span>
                </div>
            </div>

            <!-- Action menu -->
            <div class="action-buttons" id="combat-buttons">
                <button class="btn-undertale fight" id="btn-attack">FIGHT</button>
                <button class="btn-undertale mercy" id="btn-mercy">MERCY</button>
            </div>
        </div>

        <!-- Exploration (between fights) -->
        <div id="exploration-controls">
            <p>* The way is clear.</p>
            <button class="btn-undertale mercy" id="btn-move">ADVANCE</button>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>